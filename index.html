<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Spotify Playlist Shuffler</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
</head>
<body style="background: #ededed;">
<br/>
<div class="row">
    <div class="col-8 mx-auto">
        <div class="card">
            <div class="card-header">
                <h3>Play list shuffler</h3>
            </div>
            <div class="card-body">
                <textarea id="tracks" title="shuffle" class="w-100" style="height:500px;"></textarea>
                <button class="btn btn-primary float-right" id="shuffle">Shuffle</button>
            </div>
        </div>
    </div>
</div>
</body>
<script>
    /** @var textarea element */
    var textarea = $('#tracks');

    /**
     * Shuffle on click function
     */
    $('#shuffle').click(function() {
        // Create array of tracks using newline as a delimiter
        var tracks = textarea.val().split("\n");
        // Shuffle the array
        tracks = shuffle(tracks);
        // Clear existing text before outputting shuffled text
        textarea.val('');
        // Output the shuffled text
        output(tracks);
    });

    /**
     * Shuffle array
     * @param tracks
     * @returns {*}
     */
    function shuffle(tracks) {
        for(var j, x, i = tracks.length; i; j = parseInt(Math.random() * i), x = tracks[--i], tracks[i] = tracks[j], tracks[j] = x);
        return tracks;
    }

    /**
     * Output shuffled tracks
     * @param tracks
     */
    function output(tracks) {
        var i = 0;
        var l = tracks.length;
        tracks.forEach(function(track) {
            i++;
            textarea.val(textarea.val() + track);
            if (i !== l) {
                textarea.val(textarea.val() + "\n");
            }
        });
    }

</script>
</html>
